/*
 * edsc-echoforms - v1.0.0
 * Copyright Â© 2007-2014 United States Government as represented by the Administrator of the National Aeronautics and Space Administration. All Rights Reserved.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */ 
(function(){var h=this;
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function k(a){return"string"==typeof a}function ba(a,b,c){return a.call.apply(a.bind,arguments)}function ca(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function da(a,b,c){da=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ba:ca;return da.apply(null,arguments)}function ea(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function l(a){var b=m;function c(){}c.prototype=b.prototype;a.v=b.prototype;a.prototype=new c};var q,fa,ga,ha;function ia(){return h.navigator?h.navigator.userAgent:null}ha=ga=fa=q=!1;var r;if(r=ia()){var ja=h.navigator;q=0==r.lastIndexOf("Opera",0);fa=!q&&(-1!=r.indexOf("MSIE")||-1!=r.indexOf("Trident"));ga=!q&&-1!=r.indexOf("WebKit");ha=!q&&!ga&&!fa&&"Gecko"==ja.product}var s=fa,ka=ha,la=ga;function ma(){var a=h.document;return a?a.documentMode:void 0}var na;
a:{var oa="",u;if(q&&h.opera)var pa=h.opera.version,oa="function"==typeof pa?pa():pa;else if(ka?u=/rv\:([^\);]+)(\)|;)/:s?u=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:la&&(u=/WebKit\/(\S+)/),u)var qa=u.exec(ia()),oa=qa?qa[1]:"";if(s){var ra=ma();if(ra>parseFloat(oa)){na=String(ra);break a}}na=oa}var sa={};
function ta(a){if(!sa[a]){for(var b=0,c=String(na).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",n=d[f]||"",p=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{var t=p.exec(g)||["","",""],H=v.exec(n)||["","",""];if(0==t[0].length&&0==H[0].length)break;b=((0==t[1].length?0:parseInt(t[1],10))<(0==H[1].length?0:parseInt(H[1],10))?-1:(0==t[1].length?0:parseInt(t[1],10))>
(0==H[1].length?0:parseInt(H[1],10))?1:0)||((0==t[2].length)<(0==H[2].length)?-1:(0==t[2].length)>(0==H[2].length)?1:0)||(t[2]<H[2]?-1:t[2]>H[2]?1:0)}while(0==b)}sa[a]=0<=b}}var ua=h.document,va=ua&&s?ma()||("CSS1Compat"==ua.compatMode?parseInt(na,10):5):void 0;/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var w=s&&!(s&&9<=va),wa=s&&!(s&&8<=va);/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function x(a,b,c,d){this.a=a;this.nodeName=c;this.nodeValue=d;this.nodeType=2;this.parentNode=this.ownerElement=b}function xa(a,b){var c=wa&&"href"==b.nodeName?a.getAttribute(b.nodeName,2):b.nodeValue;return new x(b,a,b.nodeName,c)}x.prototype.f=function(){return this.a};var y=Array.prototype,ya=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(k(a))return k(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},z=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=k(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=y.filter?function(a,b,c){return y.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=k(a)?
a.split(""):a,n=0;n<d;n++)if(n in g){var p=g[n];b.call(c,p,n,a)&&(e[f++]=p)}return e},A=y.reduce?function(a,b,c,d){d&&(b=da(b,d));return y.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;z(a,function(c,g){e=b.call(d,e,c,g,a)});return e},Aa=y.some?function(a,b,c){return y.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=k(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ba(a,b){var c;a:{c=a.length;for(var d=k(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){c=e;break a}c=-1}return 0>c?null:k(a)?a.charAt(c):a[c]}function Ca(a){return y.concat.apply(y,arguments)}function Da(a,b,c){return 2>=arguments.length?y.slice.call(a,b):y.slice.call(a,b,c)};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function B(a){var b=null,c=a.nodeType;1==c&&(b=a.textContent,b=void 0==b||null==b?a.innerText:b,b=void 0==b||null==b?"":b);if("string"!=typeof b)if(w&&"title"==a.nodeName.toLowerCase()&&1==c)b=a.text;else if(9==c||1==c){a=9==c?a.documentElement:a.firstChild;for(var c=0,d=[],b="";a;){do 1!=a.nodeType&&(b+=a.nodeValue),w&&"title"==a.nodeName.toLowerCase()&&(b+=a.text),d[c++]=a;while(a=a.firstChild);for(;c&&!(a=d[--c].nextSibling););}}else b=a.nodeValue;return""+b}
function C(a,b,c){if(null===b)return!0;try{if(!a.getAttribute)return!1}catch(d){return!1}wa&&"class"==b&&(b="className");return null==c?!!a.getAttribute(b):a.getAttribute(b,2)==c}function D(a,b,c,d,e){return(w?Ea:Fa).call(null,a,b,k(c)?c:null,k(d)?d:null,e||new E)}
function Ea(a,b,c,d,e){if(a instanceof F||8==a.b||c&&null===a.b){var f=b.all;if(!f)return e;a=Ga(a);if("*"!=a&&(f=b.getElementsByTagName(a),!f))return e;if(c){for(var g=[],n=0;b=f[n++];)C(b,c,d)&&g.push(b);f=g}for(n=0;b=f[n++];)"*"==a&&"!"==b.tagName||G(e,b);return e}Ha(a,b,c,d,e);return e}
function Fa(a,b,c,d,e){b.getElementsByName&&d&&"name"==c&&!s?(b=b.getElementsByName(d),z(b,function(b){a.a(b)&&G(e,b)})):b.getElementsByClassName&&d&&"class"==c?(b=b.getElementsByClassName(d),z(b,function(b){b.className==d&&a.a(b)&&G(e,b)})):a instanceof I?Ha(a,b,c,d,e):b.getElementsByTagName&&(b=b.getElementsByTagName(a.c()),z(b,function(a){C(a,c,d)&&G(e,a)}));return e}
function Ia(a,b,c,d,e){var f;if((a instanceof F||8==a.b||c&&null===a.b)&&(f=b.childNodes)){var g=Ga(a);if("*"!=g&&(f=za(f,function(a){return a.tagName&&a.tagName.toLowerCase()==g}),!f))return e;c&&(f=za(f,function(a){return C(a,c,d)}));z(f,function(a){"*"==g&&("!"==a.tagName||"*"==g&&1!=a.nodeType)||G(e,a)});return e}return Ja(a,b,c,d,e)}function Ja(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)C(b,c,d)&&a.a(b)&&G(e,b);return e}
function Ha(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)C(b,c,d)&&a.a(b)&&G(e,b),Ha(a,b,c,d,e)}function Ga(a){if(a instanceof I){if(8==a.b)return"!";if(null===a.b)return"*"}return a.c()};!ka&&!s||s&&s&&9<=va||ka&&ta("1.9.1");s&&ta("9");function Ka(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function La(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(s&&!(s&&9<=va)){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,d=1==b.nodeType;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,f=b.parentNode;return e==f?Ma(a,b):!c&&Ka(e,b)?-1*Na(a,b):!d&&Ka(f,a)?Na(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=9==a.nodeType?a:
a.ownerDocument||a.document;c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(h.Range.START_TO_END,d)}function Na(a,b){var c=a.parentNode;if(c==b)return-1;for(var d=b;d.parentNode!=c;)d=d.parentNode;return Ma(d,a)}function Ma(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function E(){this.b=this.a=null;this.c=0}function Oa(a){this.a=a;this.next=this.b=null}function Pa(a,b){if(!a.a)return b;if(!b.a)return a;for(var c=a.a,d=b.a,e=null,f=null,g=0;c&&d;)c.a==d.a||c.a instanceof x&&d.a instanceof x&&c.a.f()==d.a.f()?(f=c,c=c.next,d=d.next):0<La(c.a,d.a)?(f=d,d=d.next):(f=c,c=c.next),(f.b=e)?e.next=f:a.a=f,e=f,g++;for(f=c||d;f;)f.b=e,e=e.next=f,g++,f=f.next;a.b=e;a.c=g;return a}function Qa(a,b){var c=new Oa(b);c.next=a.a;a.b?a.a.b=c:a.a=a.b=c;a.a=c;a.c++}
function G(a,b){var c=new Oa(b);c.b=a.b;a.a?a.b.next=c:a.a=a.b=c;a.b=c;a.c++}function Ra(a){return(a=a.a)?a.a:null}E.prototype.i=function(){return this.c};function Sa(a){return(a=Ra(a))?B(a):""}function J(a,b){return new Ta(a,!!b)}function Ta(a,b){this.c=a;this.b=(this.d=b)?a.b:a.a;this.a=null}Ta.prototype.next=function(){var a=this.b;if(null==a)return null;var b=this.a=a;this.b=this.d?a.b:a.next;return b.a};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Ua(a){switch(a.nodeType){case 1:return ea(Va,a);case 9:return Ua(a.documentElement);case 11:case 10:case 6:case 12:return Wa;default:return a.parentNode?Ua(a.parentNode):Wa}}function Wa(){return null}function Va(a,b){if(a.prefix==b)return a.namespaceURI||"http://www.w3.org/1999/xhtml";var c=a.getAttributeNode("xmlns:"+b);return c&&c.specified?c.value||null:a.parentNode&&9!=a.parentNode.nodeType?Va(a.parentNode,b):null};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function K(a,b,c){this.a=a;this.t=b||1;this.u=c||1}K.prototype.f=function(){return this.a};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function m(a){this.g=a;this.a=this.e=!1;this.b=null}function L(a){return"\n  "+a.toString().split("\n").join("\n  ")}function Xa(a,b){a.e=b}function Ya(a,b){a.a=b}function M(a,b){var c=a.evaluate(b);return c instanceof E?+Sa(c):+c}function N(a,b){var c=a.evaluate(b);return c instanceof E?Sa(c):""+c}function O(a,b){var c=a.evaluate(b);return c instanceof E?!!c.i():!!c};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Za(a){m.call(this,4);this.c=a;Xa(this,Aa(this.c,function(a){return a.e}));Ya(this,Aa(this.c,function(a){return a.a}))}l(Za);Za.prototype.evaluate=function(a){var b=new E;z(this.c,function(c){c=c.evaluate(a);if(!(c instanceof E))throw Error("Path expression must evaluate to NodeSet.");b=Pa(b,c)});return b};Za.prototype.toString=function(){return A(this.c,function(a,b){return a+L(b)},"Union Expression:")};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function $a(a,b){m.call(this,a.g);this.d=a;this.c=b;this.e=a.e;this.a=a.a;if(1==this.c.length){var c=this.c[0];c.m||c.c!=ab||(c=c.j,"*"!=c.c()&&(this.b={name:c.c(),l:null}))}}l($a);function P(){m.call(this,4)}l(P);P.prototype.evaluate=function(a){var b=new E;a=a.f();9==a.nodeType?G(b,a):G(b,a.ownerDocument);return b};P.prototype.toString=function(){return"Root Helper Expression"};function bb(){m.call(this,4)}l(bb);bb.prototype.evaluate=function(a){var b=new E;G(b,a.f());return b};
bb.prototype.toString=function(){return"Context Helper Expression"};
$a.prototype.evaluate=function(a){var b=this.d.evaluate(a);if(!(b instanceof E))throw Error("Filter expression must evaluate to nodeset.");a=this.c;for(var c=0,d=a.length;c<d&&b.i();c++){var e=a[c],f=J(b,e.c.a),g;if(e.e||e.c!=cb)if(e.e||e.c!=db)for(g=f.next(),b=e.evaluate(new K(g));null!=(g=f.next());)g=e.evaluate(new K(g)),b=Pa(b,g);else g=f.next(),b=e.evaluate(new K(g));else{for(g=f.next();(b=f.next())&&(!g.contains||g.contains(b))&&b.compareDocumentPosition(g)&8;g=b);b=e.evaluate(new K(g))}}return b};
$a.prototype.toString=function(){var a;a="Path Expression:"+L(this.d);if(this.c.length){var b=A(this.c,function(a,b){return a+L(b)},"Steps:");a+=L(b)}return a};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function I(a,b){this.j=a;this.d=void 0!==b?b:null;this.b=null;switch(a){case "comment":this.b=8;break;case "text":this.b=3;break;case "processing-instruction":this.b=7;break;case "node":break;default:throw Error("Unexpected argument");}}function eb(a){return"comment"==a||"text"==a||"processing-instruction"==a||"node"==a}I.prototype.a=function(a){return null===this.b||this.b==a.nodeType};I.prototype.c=function(){return this.j};
I.prototype.toString=function(){var a="Kind Test: "+this.j;null===this.d||(a+=L(this.d));return a};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Q(a,b){this.a=a;this.b=!!b}
function fb(a,b,c){for(c=c||0;c<a.a.length;c++)for(var d=a.a[c],e=J(b),f=b.i(),g,n=0;g=e.next();n++){var p=a.b?f-n:n+1;g=d.evaluate(new K(g,p,f));if("number"==typeof g)p=p==g;else if("string"==typeof g||"boolean"==typeof g)p=!!g;else if(g instanceof E)p=0<g.i();else throw Error("Predicate.evaluate returned an unexpected type.");if(!p){p=e;g=p.c;var v=p.a;if(!v)throw Error("Next must be called at least once before remove.");var t=v.b,v=v.next;t?t.next=v:g.a=v;v?v.b=t:g.b=t;g.c--;p.a=null}}return b}
Q.prototype.i=function(){return this.a.length};Q.prototype.toString=function(){return A(this.a,function(a,b){return a+L(b)},"Predicates:")};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function R(a,b,c,d){m.call(this,4);this.c=a;this.j=b;this.d=c||new Q([]);this.m=!!d;b=0<this.d.a.length?this.d.a[0].b:null;a.b&&b&&(a=b.name,a=w?a.toLowerCase():a,this.b={name:a,l:b.l});a:{a=this.d;for(b=0;b<a.a.length;b++)if(c=a.a[b],c.e||1==c.g||0==c.g){a=!0;break a}a=!1}this.e=a}l(R);
R.prototype.evaluate=function(a){var b=a.f(),c=null,c=this.b,d=null,e=null,f=0;c&&(d=c.name,e=c.l?N(c.l,a):null,f=1);if(this.m)if(this.e||this.c!=gb)if(a=J((new R(hb,new I("node"))).evaluate(a)),b=a.next())for(c=this.k(b,d,e,f);null!=(b=a.next());)c=Pa(c,this.k(b,d,e,f));else c=new E;else c=D(this.j,b,d,e),c=fb(this.d,c,f);else c=this.k(a.f(),d,e,f);return c};R.prototype.k=function(a,b,c,d){a=this.c.c(this.j,a,b,c);return a=fb(this.d,a,d)};
R.prototype.toString=function(){var a;a="Step:"+L("Operator: "+(this.m?"//":"/"));this.c.h&&(a+=L("Axis: "+this.c));a+=L(this.j);if(this.d.i()){var b=A(this.d.a,function(a,b){return a+L(b)},"Predicates:");a+=L(b)}return a};function ib(a,b,c,d){this.h=a;this.c=b;this.a=c;this.b=d}ib.prototype.toString=function(){return this.h};var jb={};function S(a,b,c,d){if(jb.hasOwnProperty(a))throw Error("Axis already created: "+a);b=new ib(a,b,c,!!d);return jb[a]=b}
S("ancestor",function(a,b){for(var c=new E,d=b;d=d.parentNode;)a.a(d)&&Qa(c,d);return c},!0);S("ancestor-or-self",function(a,b){var c=new E,d=b;do a.a(d)&&Qa(c,d);while(d=d.parentNode);return c},!0);
var ab=S("attribute",function(a,b){var c=new E,d=a.c();if("style"==d&&b.style&&w)return G(c,new x(b.style,b,"style",b.style.cssText)),c;var e=b.attributes;if(e)if(a instanceof I&&null===a.b||"*"==d)for(var d=0,f;f=e[d];d++)w?f.nodeValue&&G(c,xa(b,f)):G(c,f);else(f=e.getNamedItem(d))&&(w?f.nodeValue&&G(c,xa(b,f)):G(c,f));return c},!1),gb=S("child",function(a,b,c,d,e){return(w?Ia:Ja).call(null,a,b,k(c)?c:null,k(d)?d:null,e||new E)},!1,!0);S("descendant",D,!1,!0);
var hb=S("descendant-or-self",function(a,b,c,d){var e=new E;C(b,c,d)&&a.a(b)&&G(e,b);return D(a,b,c,d,e)},!1,!0),cb=S("following",function(a,b,c,d){var e=new E;do for(var f=b;f=f.nextSibling;)C(f,c,d)&&a.a(f)&&G(e,f),e=D(a,f,c,d,e);while(b=b.parentNode);return e},!1,!0);S("following-sibling",function(a,b){for(var c=new E,d=b;d=d.nextSibling;)a.a(d)&&G(c,d);return c},!1);S("namespace",function(){return new E},!1);
var kb=S("parent",function(a,b){var c=new E;if(9==b.nodeType)return c;if(2==b.nodeType)return G(c,b.ownerElement),c;var d=b.parentNode;a.a(d)&&G(c,d);return c},!1),db=S("preceding",function(a,b,c,d){var e=new E,f=[];do f.unshift(b);while(b=b.parentNode);for(var g=1,n=f.length;g<n;g++){var p=[];for(b=f[g];b=b.previousSibling;)p.unshift(b);for(var v=0,t=p.length;v<t;v++)b=p[v],C(b,c,d)&&a.a(b)&&G(e,b),e=D(a,b,c,d,e)}return e},!0,!0);
S("preceding-sibling",function(a,b){for(var c=new E,d=b;d=d.previousSibling;)a.a(d)&&Qa(c,d);return c},!0);var lb=S("self",function(a,b){var c=new E;a.a(b)&&G(c,b);return c},!1);/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function T(a,b,c){m.call(this,a.g);this.c=a;this.d=b;this.j=c;this.e=b.e||c.e;this.a=b.a||c.a;this.c==mb&&(c.a||c.e||4==c.g||0==c.g||!b.b?b.a||b.e||4==b.g||0==b.g||!c.b||(this.b={name:c.b.name,l:b}):this.b={name:b.b.name,l:c})}l(T);
function U(a,b,c,d,e){b=b.evaluate(d);c=c.evaluate(d);var f;if(b instanceof E&&c instanceof E){e=J(b);for(d=e.next();d;d=e.next())for(b=J(c),f=b.next();f;f=b.next())if(a(B(d),B(f)))return!0;return!1}if(b instanceof E||c instanceof E){b instanceof E?e=b:(e=c,c=b);e=J(e);b=typeof c;for(d=e.next();d;d=e.next()){switch(b){case "number":d=+B(d);break;case "boolean":d=!!B(d);break;case "string":d=B(d);break;default:throw Error("Illegal primitive type for comparison.");}if(a(d,c))return!0}return!1}return e?
"boolean"==typeof b||"boolean"==typeof c?a(!!b,!!c):"number"==typeof b||"number"==typeof c?a(+b,+c):a(b,c):a(+b,+c)}T.prototype.evaluate=function(a){return this.c.k(this.d,this.j,a)};T.prototype.toString=function(){var a="Binary Expression: "+this.c,a=a+L(this.d);return a+=L(this.j)};function nb(a,b,c,d){this.a=a;this.p=b;this.g=c;this.k=d}nb.prototype.toString=function(){return this.a};var ob={};
function V(a,b,c,d){if(ob.hasOwnProperty(a))throw Error("Binary operator already created: "+a);a=new nb(a,b,c,d);return ob[a.toString()]=a}V("div",6,1,function(a,b,c){return M(a,c)/M(b,c)});V("mod",6,1,function(a,b,c){return M(a,c)%M(b,c)});V("*",6,1,function(a,b,c){return M(a,c)*M(b,c)});V("+",5,1,function(a,b,c){return M(a,c)+M(b,c)});V("-",5,1,function(a,b,c){return M(a,c)-M(b,c)});V("<",4,2,function(a,b,c){return U(function(a,b){return a<b},a,b,c)});
V(">",4,2,function(a,b,c){return U(function(a,b){return a>b},a,b,c)});V("<=",4,2,function(a,b,c){return U(function(a,b){return a<=b},a,b,c)});V(">=",4,2,function(a,b,c){return U(function(a,b){return a>=b},a,b,c)});var mb=V("=",3,2,function(a,b,c){return U(function(a,b){return a==b},a,b,c,!0)});V("!=",3,2,function(a,b,c){return U(function(a,b){return a!=b},a,b,c,!0)});V("and",2,2,function(a,b,c){return O(a,c)&&O(b,c)});V("or",1,2,function(a,b,c){return O(a,c)||O(b,c)});/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function pb(a){m.call(this,1);this.c=a;this.e=a.e;this.a=a.a}l(pb);pb.prototype.evaluate=function(a){return-M(this.c,a)};pb.prototype.toString=function(){return"Unary Expression: -"+L(this.c)};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function qb(a){m.call(this,3);this.c=a.substring(1,a.length-1)}l(qb);qb.prototype.evaluate=function(){return this.c};qb.prototype.toString=function(){return"Literal: "+this.c};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function rb(a){m.call(this,1);this.c=a}l(rb);rb.prototype.evaluate=function(){return this.c};rb.prototype.toString=function(){return"Number: "+this.c};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function F(a,b){this.h=a.toLowerCase();this.d=b?b.toLowerCase():"http://www.w3.org/1999/xhtml"}F.prototype.a=function(a){var b=a.nodeType,c=a.nodeName;if(1!=b&&2!=b)return!1;if("*"==this.h)return!0;c=c.split(":").pop();return this.h!=c.toLowerCase()?!1:this.d==(a.namespaceURI?a.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")};F.prototype.c=function(){return this.h};F.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.d?"":this.d+":")+this.h};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function sb(a,b){if(b.length<a.o)throw Error("Function "+a.h+" expects at least"+a.o+" arguments, "+b.length+" given");if(null!==a.n&&b.length>a.n)throw Error("Function "+a.h+" expects at most "+a.n+" arguments, "+b.length+" given");a.s&&z(b,function(b,d){if(4!=b.g)throw Error("Argument "+d+" to function "+a.h+" is not of type Nodeset: "+b);});m.call(this,a.g);this.d=a;this.c=b;Xa(this,a.e||Aa(b,function(a){return a.e}));Ya(this,a.r&&!b.length||a.q&&!!b.length||Aa(b,function(a){return a.a}))}l(sb);
sb.prototype.evaluate=function(a){return this.d.k.apply(null,Ca(a,this.c))};sb.prototype.toString=function(){var a="Function: "+this.d;if(this.c.length)var b=A(this.c,function(a,b){return a+L(b)},"Arguments:"),a=a+L(b);return a};function tb(a,b,c,d,e,f,g,n,p){this.h=a;this.g=b;this.e=c;this.r=d;this.q=e;this.k=f;this.o=g;this.n=void 0!==n?n:g;this.s=!!p}tb.prototype.toString=function(){return this.h};var ub={};
function W(a,b,c,d,e,f,g,n){if(ub.hasOwnProperty(a))throw Error("Function already created: "+a+".");ub[a]=new tb(a,b,c,d,!1,e,f,g,n)}W("boolean",2,!1,!1,function(a,b){return O(b,a)},1);W("ceiling",1,!1,!1,function(a,b){return Math.ceil(M(b,a))},1);W("concat",3,!1,!1,function(a,b){var c=Da(arguments,1);return A(c,function(b,c){return b+N(c,a)},"")},2,null);W("contains",2,!1,!1,function(a,b,c){b=N(b,a);a=N(c,a);return-1!=b.indexOf(a)},2);
W("count",1,!1,!1,function(a,b){return b.evaluate(a).i()},1,1,!0);W("false",2,!1,!1,function(){return!1},0);W("floor",1,!1,!1,function(a,b){return Math.floor(M(b,a))},1);
W("id",4,!1,!1,function(a,b){function c(a){if(w){var b=e.all[a];if(b){if(b.nodeType&&a==b.id)return b;if(b.length)return Ba(b,function(b){return a==b.id})}return null}return e.getElementById(a)}var d=a.f(),e=9==d.nodeType?d:d.ownerDocument,d=N(b,a).split(/\s+/),f=[];z(d,function(a){a=c(a);!a||0<=ya(f,a)||f.push(a)});f.sort(La);var g=new E;z(f,function(a){G(g,a)});return g},1);W("lang",2,!1,!1,function(){return!1},1);
W("last",1,!0,!1,function(a){if(1!=arguments.length)throw Error("Function last expects ()");return a.u},0);W("local-name",3,!1,!0,function(a,b){var c=b?Ra(b.evaluate(a)):a.f();return c?c.localName||c.nodeName.toLowerCase():""},0,1,!0);W("name",3,!1,!0,function(a,b){var c=b?Ra(b.evaluate(a)):a.f();return c?c.nodeName.toLowerCase():""},0,1,!0);W("namespace-uri",3,!0,!1,function(){return""},0,1,!0);
W("normalize-space",3,!1,!0,function(a,b){return(b?N(b,a):B(a.f())).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1);W("not",2,!1,!1,function(a,b){return!O(b,a)},1);W("number",1,!1,!0,function(a,b){return b?M(b,a):+B(a.f())},0,1);W("position",1,!0,!1,function(a){return a.t},0);W("round",1,!1,!1,function(a,b){return Math.round(M(b,a))},1);W("starts-with",2,!1,!1,function(a,b,c){b=N(b,a);a=N(c,a);return 0==b.lastIndexOf(a,0)},2);W("string",3,!1,!0,function(a,b){return b?N(b,a):B(a.f())},0,1);
W("string-length",1,!1,!0,function(a,b){return(b?N(b,a):B(a.f())).length},0,1);W("substring",3,!1,!1,function(a,b,c,d){c=M(c,a);if(isNaN(c)||Infinity==c||-Infinity==c)return"";d=d?M(d,a):Infinity;if(isNaN(d)||-Infinity===d)return"";c=Math.round(c)-1;var e=Math.max(c,0);a=N(b,a);if(Infinity==d)return a.substring(e);b=Math.round(d);return a.substring(e,c+b)},2,3);W("substring-after",3,!1,!1,function(a,b,c){b=N(b,a);a=N(c,a);c=b.indexOf(a);return-1==c?"":b.substring(c+a.length)},2);
W("substring-before",3,!1,!1,function(a,b,c){b=N(b,a);a=N(c,a);a=b.indexOf(a);return-1==a?"":b.substring(0,a)},2);W("sum",1,!1,!1,function(a,b){for(var c=J(b.evaluate(a)),d=0,e=c.next();e;e=c.next())d+=+B(e);return d},1,1,!0);W("translate",3,!1,!1,function(a,b,c,d){b=N(b,a);c=N(c,a);var e=N(d,a);a=[];for(d=0;d<c.length;d++){var f=c.charAt(d);f in a||(a[f]=e.charAt(d))}c="";for(d=0;d<b.length;d++)f=b.charAt(d),c+=f in a?a[f]:f;return c},3);W("true",2,!1,!1,function(){return!0},0);/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function vb(a,b){if(b.i()&&4!=a.g)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");m.call(this,a.g);this.c=a;this.d=b;this.e=a.e;this.a=a.a}l(vb);vb.prototype.evaluate=function(a){a=this.c.evaluate(a);return fb(this.d,a)};vb.prototype.toString=function(){var a;a="Filter:"+L(this.c);return a+=L(this.d)};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function wb(a,b){this.a=a;this.b=b}function xb(a){for(var b,c=[];;){X(a,"Missing right hand side of binary expression.");b=yb(a);var d=a.a.next();if(!d)break;var e=(d=ob[d]||null)&&d.p;if(!e){a.a.a--;break}for(;c.length&&e<=c[c.length-1].p;)b=new T(c.pop(),c.pop(),b);c.push(b,d)}for(;c.length;)b=new T(c.pop(),c.pop(),b);return b}function X(a,b){if(a.a.b.length<=a.a.a)throw Error(b);}function zb(a,b){var c=a.a.next();if(c!=b)throw Error("Bad token, expected: "+b+" got: "+c);}
function Ab(a){a=a.a.next();if(")"!=a)throw Error("Bad token: "+a);}function Bb(a){a=a.a.next();if(2>a.length)throw Error("Unclosed literal string");return new qb(a)}function Cb(a){var b=a.a.next(),c=b.indexOf(":");if(-1==c)return new F(b);var d=b.substring(0,c);a=a.b(d);if(!a)throw Error("Namespace prefix not declared: "+d);b=b.substr(c+1);return new F(b,a)}
function Db(a){var b,c=[],d;if("/"==Y(a.a)||"//"==Y(a.a)){b=a.a.next();d=Y(a.a);if("/"==b&&(a.a.b.length<=a.a.a||"."!=d&&".."!=d&&"@"!=d&&"*"!=d&&!/(?![0-9])[\w]/.test(d)))return new P;d=new P;X(a,"Missing next location step.");b=Eb(a,b);c.push(b)}else{a:{b=Y(a.a);d=b.charAt(0);switch(d){case "$":throw Error("Variable reference not allowed in HTML XPath");case "(":a.a.next();b=xb(a);X(a,'unclosed "("');zb(a,")");break;case '"':case "'":b=Bb(a);break;default:if(isNaN(+b))if(!eb(b)&&/(?![0-9])[\w]/.test(d)&&
"("==Y(a.a,1)){b=a.a.next();b=ub[b]||null;a.a.next();for(d=[];")"!=Y(a.a);){X(a,"Missing function argument list.");d.push(xb(a));if(","!=Y(a.a))break;a.a.next()}X(a,"Unclosed function argument list.");Ab(a);b=new sb(b,d)}else{b=null;break a}else b=new rb(+a.a.next())}"["==Y(a.a)&&(d=new Q(Fb(a)),b=new vb(b,d))}if(b)if("/"==Y(a.a)||"//"==Y(a.a))d=b;else return b;else b=Eb(a,"/"),d=new bb,c.push(b)}for(;"/"==Y(a.a)||"//"==Y(a.a);)b=a.a.next(),X(a,"Missing next location step."),b=Eb(a,b),c.push(b);return new $a(d,
c)}
function Eb(a,b){var c,d,e;if("/"!=b&&"//"!=b)throw Error('Step op should be "/" or "//"');if("."==Y(a.a))return d=new R(lb,new I("node")),a.a.next(),d;if(".."==Y(a.a))return d=new R(kb,new I("node")),a.a.next(),d;var f;if("@"==Y(a.a))f=ab,a.a.next(),X(a,"Missing attribute name");else if("::"==Y(a.a,1)){if(!/(?![0-9])[\w]/.test(Y(a.a).charAt(0)))throw Error("Bad token: "+a.a.next());c=a.a.next();f=jb[c]||null;if(!f)throw Error("No axis with name: "+c);a.a.next();X(a,"Missing node name")}else f=gb;
c=Y(a.a);if(/(?![0-9])[\w]/.test(c.charAt(0)))if("("==Y(a.a,1)){if(!eb(c))throw Error("Invalid node type: "+c);c=a.a.next();if(!eb(c))throw Error("Invalid type name: "+c);zb(a,"(");X(a,"Bad nodetype");e=Y(a.a).charAt(0);var g=null;if('"'==e||"'"==e)g=Bb(a);X(a,"Bad nodetype");Ab(a);c=new I(c,g)}else c=Cb(a);else if("*"==c)c=Cb(a);else throw Error("Bad token: "+a.a.next());e=new Q(Fb(a),f.a);return d||new R(f,c,e,"//"==b)}
function Fb(a){for(var b=[];"["==Y(a.a);){a.a.next();X(a,"Missing predicate expression.");var c=xb(a);b.push(c);X(a,"Unclosed predicate expression.");zb(a,"]")}return b}function yb(a){if("-"==Y(a.a))return a.a.next(),new pb(yb(a));var b=Db(a);if("|"!=Y(a.a))a=b;else{for(b=[b];"|"==a.a.next();)X(a,"Missing next union location path."),b.push(Db(a));a.a.a--;a=new Za(b)}return a};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Gb(a){this.b=a;this.a=0}function Hb(a){a=a.match(Ib);for(var b=0;b<a.length;b++)Jb.test(a[b])&&a.splice(b,1);return new Gb(a)}var Ib=RegExp("\\$?(?:(?![0-9-])[\\w-]+:)?(?![0-9-])[\\w\\.-]+|\\/\\/|\\.\\.|::|\\d+(?:\\.\\d*)?|\\.\\d+|\"[^\"]*\"|'[^']*'|[!<>]=|\\s+|.","g"),Jb=/^\s/;function Y(a,b){return a.b[a.a+(b||0)]}Gb.prototype.next=function(){return this.b[this.a++]};/*

 Copyright 2014 Software Freedom Conservancy

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Kb(a,b){if(!a.length)throw Error("Empty XPath expression.");var c=Hb(a);if(c.b.length<=c.a)throw Error("Invalid XPath expression.");b?"function"==aa(b)||(b=da(b.lookupNamespaceURI,b)):b=function(){return null};var d=xb(new wb(c,b));if(!(c.b.length<=c.a))throw Error("Bad token: "+c.next());this.evaluate=function(a,b){var c=d.evaluate(new K(a));return new Z(c,b)}}
function Z(a,b){if(0==b)if(a instanceof E)b=4;else if("string"==typeof a)b=2;else if("number"==typeof a)b=1;else if("boolean"==typeof a)b=3;else throw Error("Unexpected evaluation result.");if(2!=b&&1!=b&&3!=b&&!(a instanceof E))throw Error("value could not be converted to the specified type");this.resultType=b;var c;switch(b){case 2:this.stringValue=a instanceof E?Sa(a):""+a;break;case 1:this.numberValue=a instanceof E?+Sa(a):+a;break;case 3:this.booleanValue=a instanceof E?0<a.i():!!a;break;case 4:case 5:case 6:case 7:var d=
J(a);c=[];for(var e=d.next();e;e=d.next())c.push(e instanceof x?e.f():e);this.snapshotLength=a.i();this.invalidIteratorState=!1;break;case 8:case 9:d=Ra(a);this.singleNodeValue=d instanceof x?d.f():d;break;default:throw Error("Unknown XPathResult type.");}var f=0;this.iterateNext=function(){if(4!=b&&5!=b)throw Error("iterateNext called with wrong result type");return f>=c.length?null:c[f++]};this.snapshotItem=function(a){if(6!=b&&7!=b)throw Error("snapshotItem called with wrong result type");return a>=
c.length||0>a?null:c[a]}}Z.ANY_TYPE=0;Z.NUMBER_TYPE=1;Z.STRING_TYPE=2;Z.BOOLEAN_TYPE=3;Z.UNORDERED_NODE_ITERATOR_TYPE=4;Z.ORDERED_NODE_ITERATOR_TYPE=5;Z.UNORDERED_NODE_SNAPSHOT_TYPE=6;Z.ORDERED_NODE_SNAPSHOT_TYPE=7;Z.ANY_UNORDERED_NODE_TYPE=8;Z.FIRST_ORDERED_NODE_TYPE=9;function Lb(a){this.lookupNamespaceURI=Ua(a)}
function Mb(a){a=a||h;var b=a.document;b.evaluate||(a.XPathResult=Z,b.evaluate=function(a,b,e,f){return(new Kb(a,e)).evaluate(b,f)},b.createExpression=function(a,b){return new Kb(a,b)},b.createNSResolver=function(a){return new Lb(a)})}var Nb=["wgxpath","install"],$=h;Nb[0]in $||!$.execScript||$.execScript("var "+Nb[0]);for(var Ob;Nb.length&&(Ob=Nb.shift());)Nb.length||void 0===Mb?$=$[Ob]?$[Ob]:$[Ob]={}:$[Ob]=Mb;})()

require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={pluginName:"echoforms"}},{}],2:[function(a,b,c){var d,e;e=a("../util.coffee"),d=function(){function a(a){this.message=a}return a.prototype.check=function(a,b,c){return e.warn(""+this.constructor.name+" must override check")},a}(),b.exports=d},{"../util.coffee":33}],3:[function(a,b,c){b.exports={Pattern:a("./pattern.coffee"),Required:a("./required.coffee"),Type:a("./type.coffee"),XPath:a("./xpath.coffee")}},{"./pattern.coffee":4,"./required.coffee":5,"./type.coffee":6,"./xpath.coffee":7}],4:[function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./base.coffee"),e=function(a){function b(a,c){this.pattern=new RegExp("^"+a+"$"),b.__super__.constructor.call(this,null!=c?c:"Invalid")}return g(b,a),b.prototype.check=function(a,b,c){return!a||a instanceof Array&&0===a.length||null!==this.pattern.exec(a)},b}(d),b.exports=e},{"./base.coffee":2}],5:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./base.coffee"),f=a("../util.coffee").execXPath,e=function(a){function b(a,c){this.xpath=a,null==c&&(c="Required field"),b.__super__.constructor.call(this,c)}return h(b,a),b.prototype.check=function(a,b,c){return a instanceof Array&&0===a.length&&(a=null),!!a||!f(b,this.xpath,c)},b}(d),b.exports=e},{"../util.coffee":33,"./base.coffee":2}],6:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./base.coffee"),f=a("../util.coffee"),e=function(a){function b(a,c){var d,e,f;null==c&&(c=null),f=a.match(/^(?:[^:]+:)?(.*)$/),this.type=f?f[1]:a,e=function(){switch(this.type){case"double":return"number";case"long":return"integer between -2^63 and 2^63-1";case"int":return"integer between -2,147,483,648 and 2,147,483,647";case"short":return"integer between -32,768 and 32,767";case"datetime":return"date/time with format YYYY-MM-DDTHH:MM:SS";case"boolean":return"true or false";default:return this.type}}.call(this),d=/^[aeiou]/i.test(e)?"an":"a",b.__super__.constructor.call(this,null!=c?c:"Value must be "+d+" "+e)}return h(b,a),b.MIN_SHORT=-Math.pow(2,15),b.MAX_SHORT=Math.pow(2,15)-1,b.MIN_INT=-Math.pow(2,31),b.MAX_INT=Math.pow(2,31)-1,b.MIN_LONG=-Math.pow(2,63),b.MAX_LONG=Math.pow(2,63)-1,b.prototype.check=function(a,b,c){if(!a)return!0;switch(this.type){case"string":return!0;case"anyuri":return!0;case"double":return this.checkDouble(a);case"long":return this.checkLong(a);case"int":return this.checkInt(a);case"short":return this.checkShort(a);case"datetime":return this.checkDateTime(a);case"boolean":return this.checkBoolean(a);default:return f.warn("Unable to validate type: ",this.type),!0}},b.prototype._checkIntegerRange=function(a,b,c){var d;return d=Number(c),!isNaN(d)&&d>=a&&b>=d&&-1===c.indexOf(".")},b.prototype.checkDouble=function(a){return!isNaN(Number(a))},b.prototype.checkLong=function(a){return this._checkIntegerRange(b.MIN_LONG,b.MAX_LONG,a)},b.prototype.checkInt=function(a){return this._checkIntegerRange(b.MIN_INT,b.MAX_INT,a)},b.prototype.checkShort=function(a){return this._checkIntegerRange(b.MIN_SHORT,b.MAX_SHORT,a)},b.prototype.checkBoolean=function(a){return"true"===a||"false"===a},b.prototype.checkDateTime=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return a.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/)?(k=a.split("T"),b=k[0],i=k[1],l=function(){var a,c,d,e;for(d=b.split("-"),e=[],a=0,c=d.length;c>a;a++)h=d[a],e.push(parseInt(h,10));return e}(),j=l[0],f=l[1],c=l[2],m=function(){var a,b,c,d;for(c=i.split(":"),d=[],a=0,b=c.length;b>a;a++)h=c[a],d.push(parseInt(h,10));return d}(),d=m[0],e=m[1],g=m[2],f>=1&&12>=f&&c>=1&&31>=c&&24>d&&60>e&&60>g):!1},b}(d),b.exports=e},{"../util.coffee":33,"./base.coffee":2}],7:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./base.coffee"),f=a("../util.coffee").execXPath,e=function(a){function b(a,c){this.xpath=a,b.__super__.constructor.call(this,null!=c?c:"Invalid")}return h(b,a),b.prototype.check=function(a,b,c){return f(b,this.xpath,c)},b}(d),b.exports=e},{"../util.coffee":33,"./base.coffee":2}],8:[function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};f=a("../constraints/index.coffee"),d=a("jquery"),g=a("../util.coffee"),e=function(){function a(b,c,e,f){var g,i,j,k,l;for(this.ui=b,this.model=c,this.controlClasses=e,this.resolver=f,this.onChange=h(this.onChange,this),this.changed=h(this.changed,this),this.refExpr=b.attr("ref"),this.id=null!=(k=b.attr("id"))?k:"echoforms-control-"+a.echoformsControlUniqueId++,this.relevantExpr=b.attr("relevant"),this.requiredExpr=b.attr("required"),this.readonlyExpr=b.attr("readonly"),this.label=b.attr("label"),l=b.children("help"),i=0,j=l.length;j>i;i++)g=l[i],this.help=d(g).text();this.loadConstraints(),this.el=this.buildDom()}return a.echoformsControlUniqueId=0,a.prototype.loadConstraints=function(){var a,b,c,e,g,h,i,j;for(this.constraints=[],this.requiredExpr&&(this.requiredConstraint=new f.Required(this.requiredExpr),this.constraints.push(this.requiredConstraint)),i=this.ui.find("> constraints > constraint"),j=[],g=0,h=i.length;h>g;g++)b=i[g],b=d(b),a=b.children("alert").text(),c=b.children("pattern"),e=b.children("xpath"),c.length>0&&this.constraints.push(new f.Pattern(c.text(),a)),e.length>0?j.push(this.constraints.push(new f.XPath(e.text(),a))):j.push(void 0);return j},a.prototype.required=function(){return null!=this.requiredConstraint?!this.requiredConstraint.check(void 0,this.model,this.resolver):void 0},a.prototype.ref=function(){return null!=this.refExpr?d(this.xpath(this.refExpr)):this.model},a.prototype.refValue=function(){var a;try{return null!=this.refExpr?d.trim(this.ref().text()):void 0}catch(b){throw a=b,""+a+"<br/>Error found while accessing the model element associated with form ui control: ["+d("<div/>").text(this.ui[0].outerHTML).html()+"]."}},a.prototype.inputValue=function(){return g.warn(""+this.constructor.name+" must override inputValue")},a.prototype.loadFromModel=function(){},a.prototype.validate=function(){var a,b,c,d;return d=null==this.relevantExpr||!!this.xpath(this.relevantExpr),c=null!=this.readonlyExpr&&!!this.xpath(this.readonlyExpr),null!=this.relevantExpr&&this.relevant(d),null!=this.readonlyExpr&&this.readonly(c),b=function(){var b,c,d,e,f;for(d=this.constraints,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.check(null!=(e=this.refValue())?e:this.inputValue(),this.model,this.resolver)||f.push(a.message);return f}.call(this),this.setErrors(b)},a.prototype.saveToModel=function(){},a.prototype.xpath=function(a){return g.execXPath(this.model,a,this.resolver)},a.prototype.element=function(){return null!=this.el?this.el:this.el=this.buildDom()},a.prototype.isChanged=function(a){return this.refValue()!==this.inputValue()||!this.refExpr},a.prototype.changed=function(){return this.el.trigger("echoforms:modelchange")},a.prototype.relevant=function(a){var b,c;return null==a?!this.el.hasClass("echoforms-irrelevant"):(b=!!a,b!==this.relevant()?(this.el.toggleClass("echoforms-irrelevant",!b),this.el.toggle(b),c=this.ref(),b?c[0].removeAttribute("pruned"):c[0].setAttribute("pruned","true")):void 0)},a.prototype.readonly=function(a){var b;return null==a?this.el.hasClass("echoforms-readonly"):(b=!!a,b!==this.readonly()?(this.el.toggleClass("echoforms-readonly ui-state-disabled",b),this.updateReadonly(b)):void 0)},a.prototype.updateReadonly=function(a){return this.inputs().attr("disabled",a),this.inputs().attr("readonly",a)},a.prototype.onChange=function(a){return this.isChanged()?(this.saveToModel(),this.changed()):void 0},a.prototype.buildLabelDom=function(){return null!=this.label?d("<label>",{"class":"echoforms-label","for":""+this.id+"-element"}).text(this.label):d()},a.prototype.buildHelpDom=function(){var a,b,c,e,f;for(b=d("<div>",{"class":"echoforms-help"}),f=this.ui.children("help"),c=0,e=f.length;e>c;c++)a=f[c],d("<p>",{"class":"echoforms-help-item"}).text(d(a).text()).appendTo(b);return b},a.prototype.buildControlDom=function(){return d("<div>",{id:this.id,"class":"echoforms-control echoforms-control-"+this.ui[0].nodeName})},a.prototype.buildElementsDom=function(){return d("<div>",{"class":"echoforms-elements"})},a.prototype.buildErrorsDom=function(){return d("<div>",{"class":"echoforms-errors"})},a.prototype.setErrors=function(a){var b,c,e,f,g;for(c=d(),f=0,g=a.length;g>f;f++)e=a[f],b=d('<div class="echoforms-error">'),b.text(e),c=c.add(b);return this.el.children(".echoforms-errors").empty().append(c)},a.prototype.buildDom=function(a){return null==a&&(a=null),this.buildControlDom().append(this.buildLabelDom()).append(this.buildElementsDom()).append(this.buildErrorsDom()).append(this.buildHelpDom())},a.prototype.addedToDom=function(){},a}(),b.exports=e},{"../constraints/index.coffee":3,"../util.coffee":33,jquery:"RucvjZ"}],9:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./input.coffee"),d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="input[type$=boolean]",b.prototype.inputClass="checkbox",b.prototype.inputElementType="checkbox",b.prototype.inputValue=function(){return this.inputs()[0].checked.toString()},b.prototype.loadFromModel=function(){return b.__super__.loadFromModel.call(this),this.refExpr?this.inputs()[0].checked="true"===this.refValue():void 0},b.prototype.buildDom=function(){var a;return a=b.__super__.buildDom.call(this),a.addClass("echoforms-control-checkbox"),a.children(".echoforms-elements").after(a.children(".echoforms-label")),a},b}(e),b.exports=d},{"./input.coffee":17}],10:[function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),e=a("../range.coffee"),f=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.selector="range",b.prototype.loadFromModel=function(){return b.__super__.loadFromModel.call(this),this.inputs().change()},b.prototype.addedToDom=function(){var a;return b.__super__.addedToDom.call(this),a=this.inputs(),d("<div/>").addClass("slider-output").insertAfter(a),a.bind("slider:ready slider:changed",function(b,c){return d(this).nextAll(".slider-output").html(a.val())}),a.simpleSlider({snap:!0,range:[this.start,this.end],step:this.step,classPrefix:"echoforms"})},b}(e),b.exports=f},{"../range.coffee":19,jquery:"RucvjZ"}],11:[function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),h=a("../typed.coffee"),g=a("./treeitem.coffee"),e=a("../base.coffee"),f=function(a){function b(a,c,f,h){var i,j;i=a.attr("id"),i&&"control"!==i&&(i+="-"+e.echoformsControlUniqueId++,a.attr("id",i)),this.separator=a.attr("separator"),this.cascade=null!=a.attr("cascade")?"true"===a.attr("cascade"):!0,this.valueElementName=a.attr("valueElementName")||"value",this.simplify_output=null!=a.attr("simplify_output")?"true"===a.attr("simplify_output"):!0,this.items=function(){var b,e,i,k;for(i=a.children("item"),k=[],b=0,e=i.length;e>b;b++)j=i[b],k.push(new g(d(j),c,f,h,"",this.separator,this));return k}.call(this),b.__super__.constructor.call(this,a,c,f,h)}return j(b,a),b.selector="tree",b.prototype.inputTag="div",b.prototype.validate=function(){var a,c,d,e;for(b.__super__.validate.call(this),e=this.items,c=0,d=e.length;d>c;c++)a=e[c],a.subtree_handle_relevant_or_required();return null!=this.el?this.saveToModel():void 0},b.prototype.valueElementTagName=function(a){var b,c;return null==a&&(a=this.ref()),b=[this.valueElementName],/:/.test(a[0].nodeName)&&(c=a[0].nodeName.split(":").shift()),null!=c&&b.unshift(c),b.join(":")},b.prototype.refValue=function(){var a,c,e,f,g;if(null!=this.valueElementName&&null!=this.refExpr){for(f=this.ref().children(),g=[],c=0,e=f.length;e>c;c++)a=f[c],g.push(d(a).text());return g}return b.__super__.refValue.call(this)},b.prototype.saveToModel=function(){var a,c,e,f,g,h,i,j,k;if(null!=this.valueElementName&&null!=this.refExpr){for(e=this.ref().empty(),f=this.valueElementTagName(e),j=this.inputValue(),k=[],h=0,i=j.length;i>h;h++)g=j[h],a=document.createElementNS(e[0].namespaceURI,f),c=d(a).text(g),e.append(c),k.push(c[0].namespaceURI=e[0].namespaceURI);return k}return b.__super__.saveToModel.call(this)},b.prototype.loadFromModel=function(){},b.prototype.modelValues=function(){var a,b;return null!=this.valueElementName&&null!=this.refExpr?b=function(){var b,c,e,f;for(e=this.ref().children(),f=[],b=0,c=e.length;c>b;b++)a=e[b],f.push(d(a).text());return f}.call(this):[]},b.prototype.inputs=function(){return this.el.find("div.jstree")},b.prototype.inputValue=function(){var a,b,c,e,f;return a=this.inputs().find("a.jstree-clicked").parent("[node_value][item-relevant=true][item-required=false]"),e=this.inputs().find("li[item-required=true][node_value][item-relevant= true]"),b=a.add(e),this.simplify_output&&(f=b.filter("li.jstree-leaf[item-required=true], li.jstree-leaf:has(a.jstree-clicked)"),c=b.filter("li:has(a.jstree-clicked + ul.jstree-children)").not("li:has(li[item-relevant=false])"),b=f.add(c).not("li.jstree-node > a.jstree-clicked + ul:not(:has(li[item-relevant=false])) > li")),b.map(function(){return d(this).attr("node_value")})},b.prototype.inputAttrs=function(){return d.extend(b.__super__.inputAttrs.call(this),{separator:this.separator,cascade:this.cascade})},b.prototype.buildElementsDom=function(){var a,c,d,e,f,g;return f=(new Date).getTime(),d=b.__super__.buildElementsDom.call(this),e=d.children("div"),e.addClass("jstree"),e.append("<ul>"),g=e.children("ul"),a=0,c=this.items,function(){var b,d,e,h,i,j;for(j=[],d=h=a,i=c.length-1;i>=h&&(b=c[d],null!=b);d=h+=1)e=b.buildElementsDom(),e.appendTo(g),a<c.length-1&&(new Date).getTime()-f>40?(console.log("Tree construction yielding to browser to avoid unresponsive script"),j.push(setTimeout(arguments.callee,0))):j.push(void 0);return j}(),e.jstree({checkbox:{keep_selected_style:!1,three_state:this.cascade},plugins:["checkbox"]}),this.tree_root=e,e.find("i.jstree-ocl").on("click",function(a,b){return a.stopPropagation()}),d},b}(h),b.exports=f},{"../base.coffee":8,"../typed.coffee":24,"./treeitem.coffee":12,jquery:"RucvjZ"}],12:[function(a,b,c){var d,e,f,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=a("jquery"),f=a("../../util.coffee"),e=function(){function a(b,c,e,f,g,h,i){var j;this.separator=h,this.label=d(b).attr("label"),this.value=d(b).attr("value"),this.relevantExpr=d(b).attr("relevant"),this.requiredExpr=d(b).attr("required"),this.model=c,this.resolver=f,null!=this.label&&this.label.length>0||(this.label=this.value),null!=h&&h.length>0&&(this.value=g+this.separator+this.value),this.ui=b,this.tree=i,this.items=function(){var g,h,k,l;for(k=b.children("item"),l=[],g=0,h=k.length;h>g;g++)j=k[g],l.push(new a(d(j),c,e,f,this.value,this.separator,i));return l}.call(this)}return a.selector="item",a.prototype.inputTag="li",a.prototype.xpath=function(a){return f.execXPath(this.model,a,this.resolver)},a.prototype.node_required=function(){return!(null==this.requiredExpr||!this.xpath(this.requiredExpr))},a.prototype.node_relevant=function(){return null==this.relevantExpr||!!this.xpath(this.relevantExpr)},a.prototype.handle_relevant_or_required=function(){var a,b,c,d;return c=this.tree.tree_root,a=c.find("[node_value = '"+this.value+"']"),a.attr("item-required",this.node_required()),a.attr("item-relevant",this.node_relevant()),d=!1,b=a.find("span.echoforms-help"),"true"===c.jstree("is_disabled",a).toString()&&(d=!0),b.find(".not-available-or-required-text").remove(),a.find("a.jstree-anchor > i.jstree-icon").first().addClass("jstree-checkbox").removeClass("jstree-disabled-icon").removeClass("jstree-required-icon"),this.node_relevant()?this.node_required()?(this.addNotAvailableRequiredText(b,"[required]"),c.jstree("enable_node",a),a.find("a").css("font-style","italic"),a.find("a.jstree-anchor > i.jstree-checkbox").addClass("jstree-required-icon").removeClass("jstree-checkbox")):(c.jstree("enable_node",a),a.find("a").css("font-style","normal"),a.find("a.jstree-anchor > i.jstree-icon").first().addClass("jstree-checkbox").removeClass("jstree-disabled-icon").removeClass("jstree-required-icon"),d?c.jstree("select_node",a):void 0):(this.addNotAvailableRequiredText(b,"[not available]"),c.jstree("disable_node",a),a.find("a").css("font-style","italic"),a.find("a.jstree-anchor > i.jstree-icon").first().addClass("jstree-disabled-icon").removeClass("jstree-checkbox"))},a.prototype.subtree_handle_relevant_or_required=function(){var a,b,c,d,e;for(this.handle_relevant_or_required(),d=this.items,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.subtree_handle_relevant_or_required());return e},a.prototype.buildHelpDom=function(){var a,b,c,e,f;for(b=d("<span>",{"class":"echoforms-help"}),f=this.ui.children("help"),c=0,e=f.length;e>c;c++)a=f[c],this.addHelpText(b,d(a).text());return b},a.prototype.addNotAvailableRequiredText=function(a,b){return this.addHelpText(a,b).addClass("not-available-or-required-text")},a.prototype.addHelpText=function(a,b){return d("<span>",{"class":"echoforms-help-item"}).text(b).attr({title:b}).appendTo(a)},a.prototype.buildElementsDom=function(){var a,b,c,e,f,h,i,j;return c=d("<li>"),c.attr({node_value:this.value}),c.addClass("jstree-open"),e=this.buildHelpDom(),b={},i=this.tree.modelValues(),i.length>0&&(j=this.value,g.call(i,j)>=0)&&(b.selected=!0),this.node_relevant()||(b.disabled=!0,b.selected=!0,this.addNotAvailableRequiredText(e,"[not available]")),this.node_required()&&(b.selected=!0,this.addNotAvailableRequiredText(e,"[required]")),c.attr({"item-relevant":this.node_relevant()}),c.attr({"item-required":this.node_relevant()}),Object.keys(b).length>0&&c.attr({"data-jstree":JSON.stringify(b)}),c.text(this.label),c.append(e),a=d("<ul>"),f=0,h=this.items,function(){var b,c,d,e,g,i,j;for(e=(new Date).getTime(),j=[],c=g=f,i=h.length-1;i>=g&&(b=h[c],null!=b);c=g+=1)d=b.buildElementsDom(),d.appendTo(a),f<h.length-1&&(new Date).getTime()-e>40?(console.log("TreeItem construction yielding to browser to avoid unresponsive script"),j.push(postMessage("script-timeout-message","*"))):j.push(void 0);return j}(),this.items.length>0&&a.appendTo(c),c},a}(),b.exports=e},{"../../util.coffee":33,jquery:"RucvjZ"}],13:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./grouping.coffee"),f=a("../util.coffee"),d=function(a){function b(a,c,d,e){var f=this;b.__super__.constructor.call(this,a,c,d,e),this.el.bind("echoforms:modelchange",function(){return f.loadFromModel(),f.validate()}),this.loadFromModel(),this.validate()}return h(b,a),b.prototype.ref=function(){return this.model.children()},b.prototype.isValid=function(){return 0===this.el.find(".echoforms-error:visible").length},b.prototype.serialize=function(a){var b;return null==a&&(a={}),b=this.model.children().clone(),(null==a.prune||a.prune===!0)&&b.find("*[pruned=true]").remove(),(null==a.prune||a.prune===!0)&&b.find("*:hasNoValue").remove(),f.printDOMToString(b[0])},b}(e),b.exports=d},{"../util.coffee":33,"./grouping.coffee":15}],14:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./grouping.coffee"),d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="group",b}(e),b.exports=d},{"./grouping.coffee":15}],15:[function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),e=a("./base.coffee"),g=a("../util.coffee"),f=function(a){function b(a,c,d,e){a.removeAttr("required"),b.__super__.constructor.call(this,a,c,d,e)}return i(b,a),b.prototype.inputs=function(){return d()},b.prototype.loadFromModel=function(){var a,c,d,e,f;for(b.__super__.loadFromModel.call(this),e=this.controls,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.loadFromModel());return f},b.prototype.buildLabelDom=function(){return null!=this.label?d("<h1>",{"class":"echoforms-label"}).text(this.label):d()},b.prototype.buildDom=function(){var a,c,e,f,h,i,j,k,l,m,n,o,p,q;for(j=b.__super__.buildDom.call(this).addClass("echoforms-grouping-control"),j.children(".echoforms-label").after(j.children(".echoforms-help")),e=this.ref(),e.length<1&&g.error("Could not find the model element associated with this group.  Verify that @ref ["+this.refExpr+"] is correct and that the namespace is set correctly"),k=this.ui,f=d(),this.controls=i=[],p=k.children(),l=0,n=p.length;n>l;l++)if(c=p[l],"help"!==c.nodeName&&"constraints"!==c.nodeName)for(q=this.controlClasses,m=0,o=q.length;o>m;m++)if(a=q[m],d(c).is(a.selector)){h=new a(d(c),e,this.controlClasses,this.resolver),i.push(h),f=f.add(h.el);break}return j.find(".echoforms-elements").replaceWith(d('<div class="echoforms-children">').append(f)),j},b.prototype.updateReadonly=function(a){var c,d,e,f,g;for(b.__super__.updateReadonly.call(this,a),f=this.controls,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.updateReadonly(a));return g},b.prototype.validate=function(){var a,c,d,e,f;for(b.__super__.validate.call(this),e=this.controls,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.validate());return f},b.prototype.addedToDom=function(){var a,c,d,e,f;for(b.__super__.addedToDom.call(this),e=this.controls,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.addedToDom());return f},b}(e),b.exports=f},{"../util.coffee":33,"./base.coffee":8,jquery:"RucvjZ"}],16:[function(a,b,c){var d,e;d={Checkbox:a("./checkbox.coffee"),Input:a("./input.coffee"),UrlOutput:a("./urloutput.coffee"),Output:a("./output.coffee"),Select:a("./select.coffee"),Range:a("./range.coffee"),Secret:a("./secret.coffee"),Textarea:a("./textarea.coffee"),Group:a("./group.coffee"),Select:a("./select.coffee"),Selectref:a("./selectref.coffee"),Base:a("./base.coffee"),Typed:a("./typed.coffee"),Grouping:a("./grouping.coffee")},e=[d.Checkbox,d.Input,d.UrlOutput,d.Output,d.Select,d.Range,d.Secret,d.Group,d.Select,d.Selectref,d.Textarea],b.exports={matchList:e,classes:d,extras:{RangeSlider:a("./extras/rangeslider.coffee"),Tree:a("./extras/tree.coffee"),TreeItem:a("./extras/treeitem.coffee")}}},{"./base.coffee":8,"./checkbox.coffee":9,"./extras/rangeslider.coffee":10,"./extras/tree.coffee":11,"./extras/treeitem.coffee":12,"./group.coffee":14,"./grouping.coffee":15,"./input.coffee":17,"./output.coffee":18,"./range.coffee":19,"./secret.coffee":20,"./select.coffee":21,"./selectref.coffee":22,"./textarea.coffee":23,"./typed.coffee":24,"./urloutput.coffee":25}],17:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./typed.coffee"),d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="input",b.prototype.inputClass="input",b.prototype.inputTag="input",b.prototype.inputElementType="text",b.prototype.inputAttrs=function(){var a;return a=b.__super__.inputAttrs.call(this),a.type=this.inputElementType,"datetime"===this.inputType&&(a.placeholder="YYYY-MM-DDTHH:MM:SS"),a},b}(e),b.exports=d},{"./typed.coffee":24}],18:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),f=a("./typed.coffee"),e=function(a){function b(a,c,d,e){this.valueExpr=a.attr("value"),b.__super__.constructor.call(this,a,c,d,e)}return h(b,a),b.selector="output",b.prototype.inputTag="p",b.prototype.inputs=function(){return d()},b.prototype.inputAttrs=function(){var a;return a=b.__super__.inputAttrs.call(this),delete a.autocomplete,a},b.prototype.refValue=function(){return this.valueExpr?this.xpath(this.valueExpr):b.__super__.refValue.call(this)},b.prototype.loadFromModel=function(){var a;try{if(b.__super__.loadFromModel.call(this),this.refExpr||this.valueExpr)return this.el.find(".echoforms-elements > p").text(this.refValue())}catch(c){throw a=c,""+a+"<br/>Error found while setting initial value of output control: ["+d("<div/>").text(this.ui[0].outerHTML).html()+"]."}},b}(f),b.exports=e},{"./typed.coffee":24,jquery:"RucvjZ"}],19:[function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./input.coffee"),e=function(a){function b(a,c,d,e){this.start=parseInt(a.attr("start"),10),this.end=parseInt(a.attr("end"),10),this.step=parseInt(a.attr("step"),10),b.__super__.constructor.call(this,a,c,d,e)}return g(b,a),b.selector="range",b}(d),b.exports=e},{"./input.coffee":17}],20:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./input.coffee"),e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="secret",b.prototype.inputElementType="password",b}(d),b.exports=e},{"./input.coffee":17}],21:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),f=a("./typed.coffee"),e=function(a){function b(a,c,e,f){var g,h,i;this.isMultiple="true"===a.attr("multiple"),this.valueElementName=a.attr("valueElementName"),this.items=function(){var b,c,e,f,j;for(e=a.children("item"),j=[],b=0,c=e.length;c>b;b++)g=e[b],f=[d(g).attr("label"),d(g).attr("value")],h=f[0],i=f[1],""===d(g).attr("value")&&(this.hasBlankOption=!0),null!=h&&h.length>0||(h=i),j.push([h,i]);return j}.call(this),b.__super__.constructor.call(this,a,c,e,f)}return h(b,a),b.selector="select",b.prototype.inputTag="select",b.prototype.valueElementTagName=function(a){var b,c;return null==a&&(a=this.ref()),b=[this.valueElementName],/:/.test(a[0].nodeName)&&(c=a[0].nodeName.split(":").shift()),null!=c&&b.unshift(c),b.join(":")},b.prototype.refValue=function(){var a,c,e,f,g;if(null!=this.valueElementName&&null!=this.refExpr){for(f=this.ref().children(),g=[],c=0,e=f.length;e>c;c++)a=f[c],g.push(d(a).text());return g}return b.__super__.refValue.call(this)},b.prototype.saveToModel=function(){var a,c,e,f,g,h,i,j,k;if(null!=this.valueElementName&&null!=this.refExpr){for(e=this.ref().empty(),f=this.valueElementTagName(e),j=this.inputValue(),k=[],h=0,i=j.length;i>h;h++)g=j[h],a=document.createElementNS(e[0].namespaceURI,f),c=d(a).text(g),e.append(c),k.push(c[0].namespaceURI=e[0].namespaceURI);return k}return b.__super__.saveToModel.call(this)},b.prototype.loadFromModel=function(){var a,c;return null!=this.valueElementName&&null!=this.refExpr?(this.validate(),c=function(){var b,c,e,f;for(e=this.ref().children(),f=[],b=0,c=e.length;c>b;b++)a=e[b],f.push(d(a).text());return f}.call(this),this.isMultiple||(c=c[0]),this.inputs().val(c)):b.__super__.loadFromModel.call(this)},b.prototype.inputValue=function(){var a;return a=this.inputs().val(),null==this.valueElementName||a instanceof Array||(a=null!=a&&""!==a?[a]:[]),a},b.prototype.inputAttrs=function(){return d.extend(b.__super__.inputAttrs.call(this),{multiple:this.isMultiple})},b.prototype.hasModelVal=function(){return this.ref().children().length>0},b.prototype.buildElementsDom=function(){var a,c,e,f,g,h,i,j;for(e=b.__super__.buildElementsDom.call(this),a=e.children("select"),this.required()?this.hasBlankOption||this.hasModelVal()||a.append('<option value=""> -- Select a value -- </option>'):this.hasBlankOption||this.hasModelVal()||a.append('<option value=""> -- No Selection -- </option>'),i=this.items,g=0,h=i.length;h>g;g++)j=i[g],c=j[0],f=j[1],d("<option>",{value:f}).text(c).appendTo(a);return e},b}(f),b.exports=e},{"./typed.coffee":24,jquery:"RucvjZ"}],22:[function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./select.coffee"),e=function(a){function b(a,c,d,e){var f;f=a.attr("valueElementName"),null==f&&a.attr("valueElementName","value"),b.__super__.constructor.call(this,a,c,d,e)}return g(b,a),b.selector="selectref",b.prototype.buildDom=function(){return b.__super__.buildDom.call(this).addClass("echoforms-control-select")},b}(d),b.exports=e},{"./select.coffee":21}],23:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./typed.coffee"),d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="textarea",b.prototype.inputTag="textarea",b}(e),b.exports=d},{"./typed.coffee":24}],24:[function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("jquery"),e=a("./base.coffee"),f=a("../constraints/type.coffee"),g=function(a){function b(a,c,d,e){var f;this.inputType=(null!=(f=a.attr("type"))?f:"string").replace(/^.*:/,"").toLowerCase(),b.__super__.constructor.call(this,a,c,d,e),this.inputs().bind("click change",this.onChange)}return i(b,a),b.prototype.loadConstraints=function(){return b.__super__.loadConstraints.call(this),this.constraints.push(new f(this.inputType))},b.prototype.inputs=function(){return null!=this._inputs?this._inputs:this._inputs=this.el.find(":input")},b.prototype.inputValue=function(){return d.trim(this.inputs().val())},b.prototype.inputAttrs=function(){var a,b;return{id:""+this.id+"-element","class":"echoforms-element-"+(null!=(a=null!=(b=this.inputElementType)?b:this.inputClass)?a:this.ui[0].nodeName),autocomplete:"off"}},b.prototype.saveToModel=function(){return b.__super__.saveToModel.call(this),this.refExpr?this.ref().text(this.inputValue()):void 0},b.prototype.loadFromModel=function(){return b.__super__.loadFromModel.call(this),this.refExpr?this.inputs().val(this.refValue()):void 0},b.prototype.buildDom=function(){return b.__super__.buildDom.call(this).addClass("echoforms-typed-control")},b.prototype.buildElementsDom=function(){return b.__super__.buildElementsDom.call(this).append(d("<"+this.inputTag+">",this.inputAttrs()));
},b}(e),b.exports=g},{"../constraints/type.coffee":6,"./base.coffee":8,jquery:"RucvjZ"}],25:[function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./output.coffee"),e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.selector="output[type$=anyURI], output[type$=anyuri]",b.prototype.inputTag="a",b.prototype.inputAttrs=function(){var a;return a=b.__super__.inputAttrs.call(this),a.href="#",a},b.prototype.loadFromModel=function(){var a;return a=this.refValue(),this.refExpr||this.valueExpr?this.el.find(".echoforms-elements > a").text(a).attr("href",a):void 0},b}(d),b.exports=e},{"./output.coffee":18}],26:[function(a,b,c){var d,e,f,g,h,i,j;d=a("jquery"),j=a("./util.coffee"),g=a("./controls/index.coffee"),f=a("./controls/form.coffee"),jQuery.expr[":"].hasNoValue=function(a){return 0===jQuery.trim(jQuery(a).text()).length},h=g.matchList.concat(),i={controls:[]},e=function(){function a(a,b){var c,e,g,k,l,m,n;this.root=a;try{this.options=d.extend({},i,b),this.form=k=this.options.form,this.controlClasses=c=this.options.controls.concat(h),null==k&&j.error("You must specify a 'form' option when creating a new ECHO Forms instance"),this.resolver=m=j.buildXPathResolverFn(k),this.doc=e=d(j.parseXML(k)),this.model=l=e.find("form > model > instance"),this.ui=n=e.find("form > ui"),this.control=new f(n,l,c,m),this.root.append(this.control.element()),this.control.addedToDom()}catch(o){throw g=o,j.error(g),g}}return a.registerControl=function(a,b){return null==b&&(b={}),h.unshift(a)},a.prototype.destroy=function(){return this.root.empty()},a.prototype.isValid=function(){return this.control.isValid()},a.prototype.serialize=function(a){return this.control.serialize(a)},a}(),b.exports=e},{"./controls/form.coffee":13,"./controls/index.coffee":16,"./util.coffee":33,jquery:"RucvjZ"}],"3Pr+1f":[function(a,b,c){!function(a,c){return b.exports={document:a,window:c}}(document,window)},{}],browser:[function(a,b,c){b.exports=a("3Pr+1f")},{}],RucvjZ:[function(a,b,c){b.exports=jQuery},{}],jquery:[function(a,b,c){b.exports=a("RucvjZ")},{}],31:[function(a,b,c){b.exports=a("./plugin.coffee")},{"./plugin.coffee":32}],32:[function(a,b,c){var d,e,f,g,h,i=[].slice;d=a("jquery"),h=a("./util.coffee"),f=a("./controls/index.coffee"),g=a("./config.coffee").pluginName,e=a("./echoform.coffee"),d[g]={control:function(a,b){return null==b&&(b={}),e.registerControl(a),b["export"]&&(d[g].controls[a.name]=a),this},controls:d.extend({},f.classes),extras:d.extend({},f.extras)},d.fn[g]=function(){var a,b,c,f;return a=1<=arguments.length?i.call(arguments,0):[],a.length>0&&"string"==typeof a[0]?(f=a,b=f[0],a=2<=f.length?i.call(f,1):[],c=this.map(function(){var c,e,f,j;return e=d.data(this,g),e?/^debug_/.test(b)?(j=b.split("_"),f=j[0],c=2<=j.length?i.call(j,1):[],e[c.join("_")]):"destroy"!==b?/^_/.test(b)||"function"!=typeof(null!=e?e[b]:void 0)?(h.error("Could not call "+b+" on "+g+" instance:",this),null):e[b].apply(e,a):(d.removeData(this,g),"function"==typeof(null!=e?e.destroy:void 0)?e.destroy():void 0):(h.warn(""+g+" not found on instance"),this)}),c[0]):a.length<2?this.each(function(){var b;return b=a[0],null==d.data(this,g)?d.data(this,g,new e(d(this),b)):void 0}):(h.error("Bad arguments to "+g+":",a),this)}},{"./config.coffee":1,"./controls/index.coffee":16,"./echoform.coffee":26,"./util.coffee":33,jquery:"RucvjZ"}],33:[function(a,b,c){var d,e,f,g,h,i,j,k,l=[].slice;k=a("browser").window,j=!1,i=function(){var a;return a=1<=arguments.length?l.call(arguments,0):[],"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn?console.warn.apply(console,a):void 0},e=function(){var a;return a=1<=arguments.length?l.call(arguments,0):[],"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error.apply(console,a),null!=$("#form_load_errors")?$("#form_load_errors").append("<div class='form_load_error'>"+a+"</div>"):void 0},f=function(a,b,c){var d,f,g;return j||"undefined"!=typeof wgxpath&&null!==wgxpath&&"function"==typeof wgxpath.install&&wgxpath.install(k),j=!0,a.length<1&&e("Error processing xpath ["+b+"].  Provided context node was not valid. Verify that the ref attribute of the parent group is valid (including the namespace)."),"["===(null!=b?b.charAt(0):void 0)&&(b="self::*"+b),"true"===b?!0:"false"===b?!1:(d=a[0].ownerDocument,b=b.replace(/^\/+|(https:)?\/\//g,function(a,b){return b?a:"/descendant-or-self::node()/"}),null==d.evaluate&&wgxpath.install({document:d}),f=d.evaluate(b,a[0],c,XPathResult.ANY_TYPE,null),g=function(){switch(f.resultType){case XPathResult.NUMBER_TYPE:return f.numberValue;case XPathResult.STRING_TYPE:return f.stringValue;case XPathResult.BOOLEAN_TYPE:return f.booleanValue;default:return f.iterateNext()}}())},g=function(a){var b,c;if(!a||"string"!=typeof a)return null;c=void 0;try{k.DOMParser?c=(new DOMParser).parseFromString(a,"text/xml"):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(d){b=d}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||e("Invalid XML: "+a),c},d=function(a){var b,c,d,e,f,g,h;for(f={},b=" default ",e=/\sxmlns(?::(\w+))?=\"([^\"]+)\"/g;null!=(c=e.exec(a));)h=c.slice(1,3),d=h[0],g=h[1],f[null!=d?d:b]=g;return function(a){return f[null!=a?a:b]}},h=function(a,b){var c,d;if(null==b&&(b={}),d="",c="","#text"===a.nodeName)return""+d+$("<div/>").text(a.nodeValue).html();if("#comment"===a.nodeName)return""+d+"<!--"+a.nodeValue+"-->";for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e].name,g=a.attributes[e].value;c+=" "+f+'="'+g+'"',/xmlns/.test(f)&&"xmlns"!=f&&(b[f.split(":").pop()]=g)}if(null==a.prefix)for(prefix in b)if(b.hasOwnProperty(prefix)&&b[prefix]==a.namespaceURI){a.prefix=prefix;break}d+="<"+a.nodeName,d+=""+c+">";for(var e=0;e<a.childNodes.length;e++)d+=h(a.childNodes[e],b);return""+d+"</"+a.nodeName+">"},b.exports={warn:i,error:e,execXPath:f,parseXML:g,buildXPathResolverFn:d,printDOMToString:h}},{browser:"3Pr+1f"}]},{},[31]);